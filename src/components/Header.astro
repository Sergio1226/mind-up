---
import MobileMenu from './MobileMenu';
---

<header id="main-header" class="fixed top-0 w-full z-50 transition-all duration-500 bg-transparent">
  <nav class="container mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <a href="#inicio" class="flex items-center gap-2 group cursor-pointer">
        <div class="bg-gradient-to-r from-purple-600 to-pink-600 p-2 rounded-xl transform group-hover:rotate-12 transition-transform duration-300">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white">
            <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
          </svg>
        </div>
        <span class="text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
          MindUp
        </span>
      </a>

      <div class="hidden md:flex gap-8">
        <a href="#inicio" class="nav-link relative font-medium text-gray-600 hover:text-purple-600 transition-colors duration-300">
          Inicio
        </a>
        <a href="#conceptos" class="nav-link relative font-medium text-gray-600 hover:text-purple-600 transition-colors duration-300">
          Conceptos
        </a>
        <a href="#modelo" class="nav-link relative font-medium text-gray-600 hover:text-purple-600 transition-colors duration-300">
          Modelo
        </a>
        <a href="#recomendaciones" class="nav-link relative font-medium text-gray-600 hover:text-purple-600 transition-colors duration-300">
          Recomendaciones
        </a>
        <a href="#estrategias" class="nav-link relative font-medium text-gray-600 hover:text-purple-600 transition-colors duration-300">
          Estrategias
        </a>
      </div>

      <MobileMenu client:load />
    </div>
  </nav>
</header>

<script>
  const header = document.getElementById('main-header');
  
  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      header?.classList.add('bg-white/80', 'backdrop-blur-lg', 'shadow-lg');
      header?.classList.remove('bg-transparent');
    } else {
      header?.classList.remove('bg-white/80', 'backdrop-blur-lg', 'shadow-lg');
      header?.classList.add('bg-transparent');
    }
  });

  const sections = document.querySelectorAll('section[id]');
  const navLinks = document.querySelectorAll('.nav-link');
  console.log(sections);
  

  window.addEventListener('scroll', () => {
    let current = '';
    sections.forEach(section => {
      const heigth=section.offsetTop;
      // const sectionHeight = section.height;
      if (window.scrollY >= heigth - 200) {
        current = section.getAttribute('id') || '';
      }
    });

    navLinks.forEach(link => {
      link.classList.remove('text-purple-600');
      link.classList.add('text-gray-600');
      if (link.getAttribute('href') === `#${current}`) {
        link.classList.add('text-purple-600');
        link.classList.remove('text-gray-600');
      }
    });
  });
</script>

<style>
  .nav-link.text-purple-600::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 100%;
    height: 2px;
    background: linear-gradient(to right, #9333ea, #ec4899);
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
</style>